<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tenant Management</title>
  <link rel="stylesheet" href="tenant-management-theme.css" />
  <link rel="stylesheet" href="tenant-management-layout.css" />
</head>
<body>
  <header class="topbar" role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">TM</div>
      <div>
        <div class="brand-title">Tenant Management</div>
        <div class="brand-subtitle">Create tenants, manage users & roles</div>
      </div>
    </div>

    <div class="topbar-actions">
      <button id="btnRefresh" class="btn btn-ghost" type="button" title="Refresh">
        Refresh
      </button>
      <button id="btnToggleTheme" class="btn btn-ghost" type="button" title="Toggle theme">
        Theme
      </button>
    </div>
  </header>

  <main class="shell" role="main">
    <!-- LEFT: tenants -->
    <section class="panel" aria-labelledby="tenantsTitle">
      <div class="panel-header">
        <h2 id="tenantsTitle">Tenants</h2>
        <div class="panel-header-actions">
          <input id="tenantSearch" class="input" type="search" placeholder="Search tenants…" autocomplete="off" />
          <button id="btnNewTenant" class="btn" type="button">New tenant</button>
        </div>
      </div>

      <div class="panel-body">
        <div id="tenantsStatus" class="hint" aria-live="polite"></div>

        <div class="table-wrap" role="region" aria-label="Tenants table" tabindex="0">
          <table class="table" aria-describedby="tenantsStatus">
            <thead>
              <tr>
                <th style="width: 40%;">Name</th>
                <th style="width: 18%;">Code</th>
                <th style="width: 12%;">Status</th>
                <th style="width: 18%;">Users</th>
                <th style="width: 12%;" class="t-right">Actions</th>
              </tr>
            </thead>
            <tbody id="tenantsTbody">
              <!-- rows injected -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- RIGHT: details / users -->
    <section class="panel" aria-labelledby="detailsTitle">
      <div class="panel-header">
        <h2 id="detailsTitle">Tenant details</h2>
        <div class="panel-header-actions">
          <span id="selectedTenantPill" class="pill" aria-live="polite">No tenant selected</span>
        </div>
      </div>

      <div class="panel-body">
        <div class="split">
          <div class="card">
            <div class="card-title">Overview</div>
            <div class="kv">
              <div class="kv-row">
                <div class="kv-k">Tenant</div>
                <div class="kv-v" id="detailName">—</div>
              </div>
              <div class="kv-row">
                <div class="kv-k">Code</div>
                <div class="kv-v" id="detailCode">—</div>
              </div>
              <div class="kv-row">
                <div class="kv-k">Status</div>
                <div class="kv-v" id="detailStatus">—</div>
              </div>
              <div class="kv-row">
                <div class="kv-k">Created</div>
                <div class="kv-v" id="detailCreated">—</div>
              </div>
            </div>

            <div class="card-actions">
              <button id="btnEditTenant" class="btn btn-ghost" type="button" disabled>Edit</button>
              <button id="btnDeactivateTenant" class="btn btn-danger" type="button" disabled>Deactivate</button>
            </div>
          </div>

          <div class="card">
            <div class="card-title">Add user to tenant</div>
            <form id="addUserForm" class="form" autocomplete="off">
              <label class="label" for="userEmail">User email</label>
              <input id="userEmail" class="input" type="email" placeholder="name@example.com" required />
              <label class="label" for="userRole">Role</label>
              <select id="userRole" class="select">
                <option value="member">Member</option>
                <option value="admin">Admin</option>
                <option value="owner">Owner</option>
              </select>
              <button class="btn" type="submit" id="btnAddUser" disabled>Add user</button>
              <div class="hint" id="addUserHint">Select a tenant to add users.</div>
            </form>
          </div>
        </div>

        <div class="card mt">
          <div class="card-title">Users in tenant</div>
          <div id="usersStatus" class="hint" aria-live="polite"></div>

          <div class="table-wrap" role="region" aria-label="Users table" tabindex="0">
            <table class="table">
              <thead>
                <tr>
                  <th style="width: 55%;">User</th>
                  <th style="width: 25%;">Role</th>
                  <th style="width: 20%;" class="t-right">Actions</th>
                </tr>
              </thead>
              <tbody id="usersTbody">
                <tr>
                  <td colspan="3" class="muted">Select a tenant to view users.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </section>
  </main>

  <!-- Tenant modal -->
  <dialog id="tenantModal" class="modal" aria-labelledby="tenantModalTitle">
    <form method="dialog" class="modal-card" id="tenantForm">
      <div class="modal-header">
        <h3 id="tenantModalTitle">New tenant</h3>
        <button class="icon-btn" value="cancel" aria-label="Close">✕</button>
      </div>

      <div class="modal-body">
        <input type="hidden" id="tenantId" />

        <label class="label" for="tenantName">Tenant name</label>
        <input id="tenantName" class="input" type="text" placeholder="Acme Corp" required maxlength="80" />

        <label class="label" for="tenantCode">Tenant code</label>
        <input id="tenantCode" class="input" type="text" placeholder="ACME" required maxlength="20" />

        <div class="hint">
          Tip: tenant code is often used for SSO realms, subdomains, or routing.
        </div>

        <div class="error" id="tenantFormError" role="alert" hidden></div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-ghost" value="cancel" type="button" id="btnCancelTenant">Cancel</button>
        <button class="btn" value="ok" type="submit" id="btnSaveTenant">Save</button>
      </div>
    </form>
  </dialog>

  <!-- toast -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true" hidden></div>

  <script src="tenant-management.js"></script>
</body>
</html>
